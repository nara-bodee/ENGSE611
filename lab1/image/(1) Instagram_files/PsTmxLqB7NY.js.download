;/*FB_PKG_DELIM*/

__d("PolarisClipsTuneYourAlgoDialogContentQuery_instagramRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25091879457104748"}),null);
__d("PolarisClipsTabDesktopClipFragment_media.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisClipsTabDesktopClipFragment_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"},{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_liked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerUserFeedbackFragment_media"},{args:null,kind:"FragmentSpread",name:"PolarisClipsDesktopVideoPlayerFragment_media"},{args:null,kind:"FragmentSpread",name:"PolarisClipsDesktopPhotoFragment_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostModalContextImpl_media"},{args:null,kind:"FragmentSpread",name:"usePolarisLikeMedia_media"}],type:"XDTMediaDict",abstractKey:null};a.exports=e}),null);
__d("PolarisClipsTabDesktopClip.react",["CometErrorBoundary.react","CometRelay","PolarisClipsDesktopCommentsButtonContext","PolarisClipsDesktopPhoto.react","PolarisClipsDesktopVideoPlayer.react","PolarisClipsTabActiveClipUserFeedbackContextProvider.react","PolarisClipsTabDesktopClipError.react","PolarisClipsTabDesktopClipFragment_media.graphql","PolarisClipsTabHelpers","PolarisClipsViewerUserFeedback.react","PolarisCommentsSortContext.react","PolarisMediaConstants","PolarisOrganicImpressionAction","PolarisPostModalContext.react","PolarisViewpointReact.react","PolarisVpvdImpressionAction","react","stylex","usePolarisCommentsSortOrder","usePolarisLikeMedia"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect,f=d.useMemo,g=d.useRef,h=.5;function y(t){var a,i=t.clipIndex,l=t.mediaHeight,u=t.mediaWidth,d=t.onClipVisible,y=t.queryReference,C=o("CometRelay").useFragment(e!==void 0?e:e=n("PolarisClipsTabDesktopClipFragment_media.graphql"),y),b=p(o("PolarisClipsTabActiveClipUserFeedbackContextProvider.react").PolarisClipsTabActiveClipUserFeedbackContext),v=b.getActiveClipUserFeedback,S=b.setActiveClipUserFeedback,R=r("usePolarisLikeMedia")({analyticsContext:"reelsTab",mediaFragmentKey:C,sourceOfLike:"keyboard_shortcuts"}),L=r("usePolarisCommentsSortOrder")(),E=L[0],k=L[1],I=g(null),T=g(null),D=m(function(e){T.current=e},[]),x=m(function(e){I.current=e},[]);_(function(){var e,t=(e=v())==null?void 0:e.getActiveClipMediaPk;t&&t()===C.pk&&S({getActiveClipMediaPk:function(){return C.pk},toggleActiveClipLike:function(){var e;R(C.pk,!((e=C.has_liked)!=null&&e))}})},[C.has_liked,C.pk,v,R,S]);var $=f(function(){var e,t;return[function(e){if(e.percentVisible>=h){var t;d(C.pk,(t=C.code)!=null?t:"",i),S({getActiveClipMediaPk:function(){return C.pk},toggleActiveClipLike:function(){var e;R(C.pk,!((e=C.has_liked)!=null&&e))}})}},o("PolarisOrganicImpressionAction").makeClipImpressionAction({id:C.pk,owner:{id:(e=(t=C.user)==null?void 0:t.id)!=null?e:""}},"reelsTab")]},[C.pk,(a=C.user)==null?void 0:a.id,C.code,C.has_liked,d,i,S,R]);$.push(o("PolarisVpvdImpressionAction").makeClipVpvdImpressionAction({id:C.pk},i,"reelsTab"));var P=o("PolarisClipsTabHelpers").getClipsContainerStyles();return c.jsx(o("PolarisViewpointReact.react").Viewpoint,{action:$,id:C.pk,children:function(t){return c.jsx(o("PolarisClipsDesktopCommentsButtonContext").PolarisClipsDesktopCommentsButtonProvider,{value:{commentIdToScrollRef:T,openCommentsRef:I,setCommentIdToScroll:D,setOpenComments:x},children:c.jsx(o("PolarisPostModalContext.react").PostModalContext,{media:C,children:c.jsxs("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(P.container),{"data-testid":void 0,ref:t,children:[c.jsx("div",{className:s(P.container),style:{height:l>0?l+"px":"100%",width:u>0?u+"px":void 0},children:c.jsx(r("CometErrorBoundary.react"),{fallback:function(){return c.jsx(r("PolarisClipsTabDesktopClipError.react"),{})},type:"fatal",children:C.media_type===o("PolarisMediaConstants").MediaTypes.IMAGE?c.jsx(r("PolarisClipsDesktopPhoto.react"),{queryReference:C}):c.jsx(r("PolarisClipsDesktopVideoPlayer.react"),{mediaHeight:l,queryReference:C})})}),c.jsx(o("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:E,setCommentsSortOrder:k,children:c.jsx(r("PolarisClipsViewerUserFeedback.react"),{adFragmentKey:null,containerStaticStyles:P.ufi,fragmentKey:C,iconColor:"ig-primary-icon",shadow:!1})})]}))})})}},C.pk)}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),98);
__d("PolarisClipsTabDesktopClipContainer.react",["react","react-compiler-runtime","stylex","useIGDChatTabsReelsPageResize.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={marginInlineStart:"x4lel18",$$css:!0},d={center:{justifyContent:"xl56j7k",$$css:!0},chatTabsOffSet:function(t){return[c,{"--x-marginInlineStart":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(-t)}]},clipContainer:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",height:"xg7h5cd",paddingInlineStart:"x1mfogq2",paddingInlineEnd:"xsfy40s",scrollSnapAlign:"x1bhewko",scrollSnapStop:"xgv127d",width:"xh8yej3",$$css:!0},start:{marginInlineStart:"x19xpz8q",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(10),a=t.children,i=t.contentPos,l=i===void 0?"center":i,s=r("useIGDChatTabsReelsPageResize.react")(),c=s[1],m=s[2],p;n[0]!==l||n[1]!==m||n[2]!==c?(p=(e||(e=r("stylex"))).props(d.clipContainer,l==="start"&&d.start,l==="center"&&d.center,c&&d.chatTabsOffSet(m)),n[0]=l,n[1]=m,n[2]=c,n[3]=p):p=n[3];var _;n[4]===Symbol.for("react.memo_cache_sentinel")?(_={className:"xyamay9 x1l90r2v"},n[4]=_):_=n[4];var f;n[5]!==a?(f=u.jsx("div",babelHelpers.extends({},_,{children:a})),n[5]=a,n[6]=f):f=n[6];var g;return n[7]!==p||n[8]!==f?(g=u.jsx("div",babelHelpers.extends({},p,{children:f})),n[7]=p,n[8]=f,n[9]=g):g=n[9],g}l.default=m}),98);